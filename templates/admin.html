{% extends "layout.html" %}

{% block main %}

<h1>ROUTE ADMIN</h1>
    {% for name in table_names %}
        <a href="/admin?table={{ name }}" method="get" name="selected_table" value="{{ name }}">{{ name }}</a>
    {% endfor %}

    {% if table %}
        <h1>{{ table['name'] }}</h1>
        <form class="table" action="/admin" method="post" name="">
            <input type="hidden" name="table_name" value="{{ table['name'] }}">
            {% for key in table['keys'] %}
                {% if key != 'id'%}
                    {% if table['keys'][key] == None %}
                        <input type="text" name="{{ key }}" value="" placeholder="{{ key }}">
                    {% else %}
                        <select name="{{ key }}">
                            {% for option in table['keys'][key] %}
                                <option value="{{ option }}">{{ option }}</option>
                            {% endfor %}
                        </select>
                    {% endif %}
                {% endif %}
            {% endfor %}
            <input type="submit" name="{{ table['name'] }}" value="add">
        </form>

        <table class="table">
            {% for key in table['keys'] %}
                    <th>{{ key }}</th>
            {% endfor %}
            {% for row in table['data'] %}
                <tr>
                {% for cell in row %}
                    <td>{{ row[cell] }}</td>
                {% endfor %}
                </tr>
            {% endfor %}
    {% else %}
        <h1>choose table to edit</h1>
    {% endif %}

{% endblock %}
